# Resource.io Take-home

* [Thoughts](#thoughts)
* [Running locally](#running-locally)

## Thoughts

This was a fun project!  I enjoyed working through the different design and feedback stages and then ultimately completing the code.  I had node.js installed on my system and did local development for this project.  I first wanted to simulate the environment that I would find myself in had the other components been somewhat taken care of.  To this end, I went online to generate a UUID to use with the sample email.  I created my project directory and saved the sample with the name <UUID>.json.  I build a quick node.js express server to handle requests from the web client.  I spent a little bit of time playing with how I wanted to deliver the content.  I considered parsing information and then sending specific bits on the server side, but ultimately thought it would be cleaner to keep a simple server implementation and decode the email on the client side.  As I would now be sending the entire file, it became pretty straightforward to send the requested file if it exists or to send an error if it did not.  Typically, a read-only response like this will be somewhat safe, but I do think there is a possibility for abuse.  If I had more time, I would look into putting better security on the file access.

On the client side, I had decided that the user would have already received a link to the sample email.  I crafted this link in the form: <Dir>/Resource.io/Web/index.html?archive=<UUID>.  My first step was to implement a function that could scan the link for the archive UUID.  I then worked on crafting an AJAX call that would POST the requested UUID to the server and then parse the response.  Once I had the data on the client side, I began working on how to pull out the parts I wished to display.  I personally found many of the headers to be redundant and chose to include only: To, From, Date, and Subject.  I wanted my implementation to easily scale should I decide to later include more meta-data.  I also do not think it would be terribly difficult to scan all the data and include it in some expanded view, should the user request it.  My next step was to tease out the body of the email.  My limited knowledge of this email format was essentially that it could be nested an indefinite number of times.  I attempted to create a recursive function to step through the email content and pull out any data that was either plain text or html.  What I have works for the test email, though I did not test exhaustively with other files.  I think what I have should work in theory, or at minimum provide a sound launch pad for further development.  I had some difficulty decoding the body of the email.  The protocols and online sources I attempted to use were introducing strange artifacts that felt should not have been present.  After a bit, I reached out to Austin and he turned me on to simplycalc, which worked beautifully.  I used JQuery to dynamically add elements to the page to hold the various components parsed from the email.  I did not perform malware scans on the decoded contents of the email.  I think there is room for additional safetey measures to be taken in that regard.  Finally, I spruced things up a bit with some CSS styling.

Overall, I am relatively happy with what I came up with as a MVP.  There is certainly room for expansion, but I think my design should lend itself easily to that end.  

## Running locally

Save the project in a directory where node.js is installed.  It may be necessary to install express or body-parser (npm install express, npm install body-parser).  Run the server locally with: "node email_archive_server.js".  The server should indicate that it is listening to local traffic.  Open the index.html, which should launch in the default browser.  Modify the browser URL to include "?archive=d1fdd200-3e9e-11e8-b467-0ed5f89f718b".  My URL was: "file:///C:/Users/John/Node.js/Resource.io/Web/index.html?archive=d1fdd200-3e9e-11e8-b467-0ed5f89f718b".  The page should then load the email.  I do not expect the usage of this site to include the base webpage with no URL, but I included a Homepage of sorts for safety.  Poorly formed URLS should result in nothing being loaded, and links requesting non-existent emails should return an error dialogue on the page.  *NOTE* My adblock was preventing elements from loading correctly in HTML.  I had to disable my adblock to load the page fully.